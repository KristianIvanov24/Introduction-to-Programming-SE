# Бройни системи. Побитови операции.

## 1. Бройни системи.
Бройната система е правило за *представяне на числа* чрез краен набор от **цифри** и **позиционни стойности**, определени от една основа (base).
- **Цифри** – символи, от които строим числата
- **Основа (base)** – брой различни цифри; означаваме бройната система като (b) долу вдясно:
- **Полимониален запис:** 
a<sub>n</sub>b<sup>n</sup> + a<sub>n-1</sub>b<sup>n-1</sup> + … + a<sub>1</sub>b<sup>1</sup> + a<sub>0</sub>b<sup>0</sup>

Пример:
8023 = 8⋅10<sup>3</sup> + 0⋅10<sup>2</sup> + 2⋅10<sup>1</sup> + 3⋅10<sup>0</sup>

## 2. Видове бройни системи

### Десетична система
- Съдържа цифрите в интервала {0, 9}
- Всяка позиция е степен на 10
- Това е естествената бройна система, която използваме ежедневно и в която първо се учим да броим.

### Двоична система
- Съдържа цифрите 0 и 1
- Всяка позиция е степен на 2
- Всеки бит отговаря дали нещо е "изключено/включено"
- Пример
100010<sub>2</sub> = 1⋅2<sup>5</sup> + 0⋅2<sup>4</sup> + 0⋅2<sup>3</sup> + 0⋅2<sup>2</sup> + 1⋅2<sup>1</sup> + 0⋅2<sup>0</sup> = 32 + 2 = 34<sub>10</sub>

### Шестнайсетична система
- Съдържа цифрите в интервала {0, 9} и буквите в интервала {A, F}
- A=10, B=11, C=12, D=13, E=14, F=15
- Всяка позиция е степен на 16
- Пример
1F<sub>16</sub> = 1⋅16<sup>1</sup> + 15⋅16<sup>0</sup> = 16 + 15 = 31<sub>10</sub>

## 3. Преобразуване между бройни системи

### Алгоритъм за преобразуване от произволна бройна система в десетична бройна система
Използваме позиционния модел a<sub>n</sub>b<sup>n</sup> + a<sub>n-1</sub>b<sup>n-1</sup> + … + a<sub>1</sub>b<sup>1</sup> + a<sub>0</sub>b<sup>0</sup> като за всяко b заместваме бройната система, в която е числото ни. Резултатът е числото в десетична бройна система.
- Пример 10110<sub>2</sub> = 1⋅2<sup>4</sup> + 0⋅2<sup>3</sup> + 1⋅2<sup>2</sup> + 1⋅2<sup>1</sup> + 0⋅2<sup>0</sup> = 16 + 4 + 2 = 22<sub>10</sub>


### Алгоритъм за преобразуване от десетична бройна система в произволна бройна система
```
1. Делим числото на основата b
2. Записваме остатъка
3. Делим частното отново на b и пак записваме остатъка
4. Продължаваме, докато частното стане 0
5. Четем остатъците отзад напред.
```
- Пример 23<sub>10</sub> -> ?<sub>2</sub>
```
23 / 2 = 11, остатък 1
11 / 2 = 5, остатък 1
5 / 2 = 2, остатък 1
2 / 2 = 1, остатък 0
1 / 2 = 0, остатък 1
```

Резултат: 10111<sub>2</sub>

## 4. Представяния на отрицателни числа

- **One's complement:** 5<sub>10</sub> == 0..0101<sub>2</sub> -> (flip) 1..1010<sub>2</sub> == -5<sub>10</sub>
- **Two's complement:** 5<sub>10</sub> == 0..0101<sub>2</sub> -> (flip) 1..1010<sub>2</sub> -> (1..1010<sub>2</sub> + 0..0001<sub>2</sub>) 1..1011<sub>2</sub> == -5<sub>10</sub>

## 5. Побитови операции
Побитовите операции са операции, които работят директно върху отделните битове от двоичното представяне на целите числа.
Всяка операция се прилага върху всеки бит поотделно, без да засяга останалите битове на числото.


### Видове побитови операции
 - Побитово И (**&**) - оставя 1 само там, където и двата операнда имат 1
 - Побитово ИЛИ  (**|**) - оставя 1 навсякъде, където поне един от операндите има 1
 - Побитово ИЗКЛЮЧВАЩО ИЛИ  (**^**) - оставя 1 само ако двата бита са различни
 - Побитово отрицание (**~**) - обръща всички битове
 - Побитово отместване  (**<<** )     ( **>>**) - Премества битовете наляво или надясно.

Примери:
|        |           |
|--------|-----------|
| a      | 101010100 |
| b      | 100101110 |
| a&b    | 100000100 |
| a \| b | 101111110 |
| a^b    | 001111010 |
| ~a     | 010101011 |
| a << 2 | 101010000 |
| a >> 2 | 001010101 |

### Endianness
Начинът, по който компютърната архитектура подрежда байтовете на едно многобайтно число в паметта — дали най-значимият байт (MSB) или най-малко значимият байт (LSB) се записва на най-ниския адрес.
- **Little-endian** - най-малкият байт (Least Significant Byte – LSB) се записва на най-ниския адрес
- **Big-endian** - най-големият байт (Most Significant Byte – MSB) се записва първи

## Задачи
 - Функция, която с побитови операции проверява дали число е четно
 - Функция, която с побитови операции повдига 2 на степен k.
 - Изчистване на бит (да стане 0) в число на дадена позиция 
 - Вдигане на бит (да стане 1) в число на дадена позиция

 
## За упражнение

**Задача 1:** Размяна на две променливи, без трета с побитови.

**Задача 2:** Напишете функция, която приема малка буква и я превръща в голяма.

*Вход: а,  Изход: А*

**Задача 3:** Напишете функция, която приема цяло число и връща броя на 1-ците в двоичния му запис.

*Вход: 189,  Изход: 6*

**Задача 4:** Напишете функция, която приема цяло число и обръща най-десния бит в него, който е единица.

*Вход: 12, Изход: 8*

*Вход: 15, Изход: 14*

**Задача 5:** Напишете функция, която по подадено цяло число n и цяло число k и връща числото, което е "закодирано" в последните k бита на n.

*Вход: 15 2, Изход: 3*

*Вход: 189 3, Изход: 5*

*Вход: 189 4, Изход: 13*
